#pragma once
#include "stm32f4xx_hal.h"

/* ICM-42670 I2C address */
#define ICM42670_ADDR  0x68

typedef struct {
    int16_t ax, ay, az;
    int16_t gx, gy, gz;
} imu_raw_t;

typedef struct {
    float ax, ay, az;
    float gx, gy, gz;
} imu_scaled_t;

extern imu_raw_t imu_raw;
extern imu_scaled_t imu;

void imu_init(void);
void imu_read_dma(void);
void imu_process(void);
